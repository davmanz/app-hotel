CREATE DATABASE IF NOT EXISTS bd_hotel;
USE bd_hotel;

CREATE TABLE bd_hotel_documenttypes (
  document_id INT AUTO_INCREMENT PRIMARY KEY,
  name_document VARCHAR(100)
);

CREATE TABLE bd_hotel_users (
  user_id VARCHAR(100) PRIMARY KEY,
  first_name VARCHAR(255),
  last_name VARCHAR(255),
  email VARCHAR(190) UNIQUE,
  phone INT,
  password_hash VARCHAR(255),
  personal_photo VARCHAR(255),
  document_number VARCHAR(100),
  document_id INT,
  r_person_a VARCHAR(100),
  r_person_a_phone INT,
  r_person_b VARCHAR(100),
  r_person_b_phone INT,
  admin TINYINT(1),
  active TINYINT(1),
  FOREIGN KEY (document_id) REFERENCES bd_hotel_documenttypes(document_id)
);

CREATE TABLE bd_hotel_building (
  bld_id VARCHAR(100) PRIMARY KEY,
  bld_name VARCHAR(100),
  bld_address VARCHAR(100),
  bld_floors INT
);

CREATE TABLE bd_hotel_floors (
  flr_id VARCHAR(100) PRIMARY KEY,
  bld_id VARCHAR(100),
  flr_rooms INT,
  FOREIGN KEY (bld_id) REFERENCES bd_hotel_building(bld_id)
);

CREATE TABLE bd_hotel_rooms (
  rooms_id VARCHAR(100) PRIMARY KEY,
  flr_id VARCHAR(100),
  number_room INT,
  FOREIGN KEY (flr_id) REFERENCES bd_hotel_floors(flr_id)
);

CREATE TABLE bd_hotel_contracts (
  contract_id VARCHAR(100) PRIMARY KEY,
  user_id VARCHAR(100),
  contract_start_date DATE,
  contract_end_date DATE,
  payment_day INT,
  rent_amount DECIMAL(10,2),
  warranty DECIMAL(10,2),
  has_wifi TINYINT(1),
  wifi_cost DECIMAL(10,2),
  rooms_id VARCHAR(100),
  contract_photo VARCHAR(255),
  active TINYINT(1),
  FOREIGN KEY (user_id) REFERENCES bd_hotel_users(user_id),
  FOREIGN KEY (rooms_id) REFERENCES bd_hotel_rooms(rooms_id)
);

CREATE TABLE bd_hotel_payment_history (
  contract_id VARCHAR(100),
  upload_date DATE,
  paid_month INT,
  FOREIGN KEY (contract_id) REFERENCES bd_hotel_contracts(contract_id)
);

